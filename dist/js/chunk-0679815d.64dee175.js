(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0679815d"],{"074d":function(o,t,s){o.exports=s.p+"img/cardback.8bda427b.jpg"},"09d4":function(o,t,s){"use strict";s.r(t);var i=function(){var o=this,t=o.$createElement,i=o._self._c||t;return i("div",[i("div",{staticClass:"container howDraw underline"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:5==o.currentNum||0==o.currentNum,expression:"currentNum == 5 || currentNum == 0"}],on:{click:o.btnCamp5}},[o._v(o._s(this.cardPool.name)+"卡池万象卡盒")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:5==o.currentNum||0==o.currentNum,expression:"currentNum == 5 || currentNum == 0"}],on:{click:o.btnCamp25}},[o._v(o._s(this.cardPool.name)+"卡池万象卡盒×5")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:5==o.currentNum||0==o.currentNum,expression:"currentNum == 5 || currentNum == 0"}],on:{click:o.btnDiamond5}},[o._v("钻石召唤万象卡盒")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:5==o.currentNum||0==o.currentNum,expression:"currentNum == 5 || currentNum == 0"}],on:{click:o.btnDiamond25}},[o._v("钻石召唤万象卡盒×5")]),i("br"),i("el-button",{on:{click:function(t){o.dialogVisible=!0}}},[o._v(o._s(this.$t("african.accumulation")))]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:o.showNext&&5!=o.currentNum&&0!=o.currentNum,expression:"showNext && currentNum != 5 && currentNum != 0"}],attrs:{type:"text"}},[o._v(o._s(o.currentNum)+"/5")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:o.showNext&&5!=o.currentNum,expression:"showNext && currentNum != 5"}],on:{click:o.nextBox}},[o._v(o._s(this.$t("african.next")))])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:o.cards!=[],expression:"cards != []"}],staticClass:"container cards"},o._l(o.cards,(function(t,r){return i("div",{key:r,class:"card col-sm-2 col-xs-5 "+t.class,on:{click:function(t){return o.open(r)}}},[i("img",{attrs:{src:s("074d")}}),i("div",{staticClass:"cardfront",style:"background-image: url("+t.pic+")"},[i("div",{class:"title "+t.type},[i("span",[o._v(o._s(t.cost))]),o._v(o._s(t.name)+" ")])]),i("div",{staticClass:"txt"},[i("div",{class:"rare "+t.rare}),o._v(" "+o._s(t.txt)+" ")])])})),0),i("el-dialog",{attrs:{title:this.$t("african.accumulation"),visible:o.dialogVisible,width:"90%"},on:{"update:visible":function(t){o.dialogVisible=t}}},[i("div",{staticClass:"pay"},[o._v(" "+o._s(this.$t("african.hasCost"))+o._s(o.diamonds)+o._s(this.$t("african.diamond"))+" ")]),i("div",{staticClass:"cardAmounts"},o._l(o.european,(function(t,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.amount,expression:"item.amount"}],key:s,staticClass:"cardAmount col-sm-3 col-xs-6 ",class:t.rare},[i("div",[o._v(o._s(t.name))]),i("div",[o._v(o._s("x"+t.amount))])])})),0)])],1)},r=[],n=s("6016"),a=n["a"],e=(s("61cf"),s("e607"),s("2877")),c=Object(e["a"])(a,i,r,!1,null,"79ab8752",null);t["default"]=c.exports},6016:function(o,t,s){"use strict";(function(o){s("4160"),s("b0c0"),s("159b");var i=s("c1df"),r=s.n(i);t["a"]={name:"african",data:function(){return{equipmentList:[],herosList:[],cardPoolList:[],cardPool:{},african:[],european:[],version:78,min:1,cards:[],cardHeight:0,times:0,dialogVisible:!1,diamonds:0,poolId:0,gold:[],silver:[],copper:[],showNext:!1,currentNum:0,luckGold:0,currentMode:"Diamond"}},filter:{summonType:function(o){switch(o){case 1:return"l1";case 2:return"l2";case 3:return"l3";case 4:return"l4"}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){var o=this;this.european=[],this.african=[],this.gold=[],this.silver=[],this.copper=[],this.$http.get("heros.json").then((function(t){o.herosList=t.data,console.log("英雄数量------",o.herosList.length),o.allocate(o.herosList,o.version)})),this.$http.get("equipment.json").then((function(t){o.equipmentList=t.data,console.log("装备数量------",o.equipmentList.length),o.allocate(o.equipmentList,o.version)})),this.$http.get("fajiang.json").then((function(t){o.cardPoolList=t.data;var s=r()().diff(r()("2020-08-31"),"days")%105,i=Math.floor(s/7),n=s%7;console.log(s,i,n),o.poolId=n<4?2*i+1:2*i+2,console.log("池子id---",o.poolId),o.cardPoolList.forEach((function(t){t.id==o.poolId&&(o.cardPool=t)}))}))},allocate:function(o,t){var s=this;switch(t){case 96:o.forEach((function(o){"gold"==o.rare?s.european.push(o):(s.european.push(o),s.african.push(o))}));break;case 78:o.forEach((function(o){o.if&&("gold"==o.rare?s.european.push(o):(s.european.push(o),s.african.push(o)))}));break}},rareAllocate:function(o){var t=this;o.forEach((function(o){"gold"==o.rare?t.gold.push(o):"silver"==o.rare?t.silver.push(o):t.copper.push(o)}))},rollN:function(o,t){return Math.floor(Math.random()*(o+1-t)+t)},rollcard:function(o){return Math.floor(Math.random()*o.length)},summon:function(o,t,s,i,r){"copper"==o.rare?(console.log("l"+t+o.name+"*"+r),this.european.forEach((function(t){t.name==o.name&&(t.amount=t.amount+r)})),this.inin(o,t,o.name+"×"+r)):"silver"==o.rare?(console.log("l"+t+o.name+"*"+i),this.european.forEach((function(t){t.name==o.name&&(t.amount=t.amount+i)})),this.inin(o,t,o.name+"×"+i)):(console.log("l"+t+o.name+"*"+s),this.european.forEach((function(t){t.name==o.name&&(t.amount=t.amount+s)})),this.inin(o,t,o.name+"×"+s))},probAllocate:function(o){var t=void 0,s=0;o.forEach((function(o){s+=o.prob}));for(var i=Math.random()*s,r=0;r<o.length;r++)if(i-=o[r].prob,i<0){t=o[r];break}return t},draw1ByUp:function(o){var t=this,s=void 0,i=this.rollN(100,this.min),r=this.rollN(100,this.min);console.log("rare_no---",r),this.cardPoolList.forEach((function(s){s.id==o&&(t.cardPool=s)}));var n=this.cardPool.cards.length*(this.cardPool.prob-1)+this.european.length;return this.cardPool.cards.forEach((function(o){t.european.forEach((function(s){o==s.name&&"equipment"!=s.type?s.prob=t.cardPool.prob/n:o==s.name&&(s.prob=t.cardPool.prob/n*2)}))})),this.european.forEach((function(o){o.prob||"equipment"==o.type?o.prob||(o.prob=2/n):o.prob=1/n})),r<=60?(this.rareAllocate(this.european),s=this.probAllocate(this.copper)):r>60&&r<=90?(this.rareAllocate(this.european),s=this.probAllocate(this.silver)):(this.rareAllocate(this.european),s=this.probAllocate(this.gold)),console.log(s),i<=70?this.summon(s,2,1,1,1):i>70&&i<=95?this.summon(s,3,3,3,3):this.summon(s,4,10,10,10),[i,r]},draw5ByUp:function(o){for(var t=this,s=void 0,i=0,r=0,n=0;n<4;n++){var a=this.draw1ByUp(o);a[0]>70&&i++,a[1]>90&&r++}if(i)this.draw1ByUp(o);else{var e=Math.floor(30*Math.random()+70),c=this.rollN(100,this.min);this.cardPoolList.forEach((function(s){s.id==o&&(t.cardPool=s)}));var l=(100-this.cardPool.cards.length*this.cardPool.prob)/(this.european.length-this.cardPool.cards.length);console.log("cardRProb---",l),this.cardPool.cards.forEach((function(o){t.european.forEach((function(s){o==s.name&&(s.prob=t.cardPool.prob)}))})),c<=60?s=this.probAllocate(this.copper):c>60&&c<=90?s=this.probAllocate(this.silver):(r++,s=this.probAllocate(this.gold)),e>70&&e<=95?this.summon(s,3,3,3,3):this.summon(s,4,10,10,10)}return r},draw1ByDiamond:function(){var o=void 0,t=this.rollN(100,this.min),s=this.rollN(100,this.min);console.log("rare_no---",s);var i=this.european.length;return this.european.forEach((function(o){o.prob=1/i})),s<=60?(this.rareAllocate(this.european),o=this.probAllocate(this.copper)):s>60&&s<=90?(this.rareAllocate(this.european),o=this.probAllocate(this.silver)):(this.rareAllocate(this.european),o=this.probAllocate(this.gold)),console.log(o),t<=70?this.summon(o,2,1,1,1):t>70&&t<=95?this.summon(o,3,3,3,3):this.summon(o,4,10,10,10),[t,s]},draw5ByDiamond:function(){for(var o=void 0,t=0,s=0,i=0;i<4;i++){var r=this.draw1ByDiamond();r[0]>70&&t++,r[1]>90&&s++}if(t)this.draw1ByDiamond();else{var n=Math.floor(30*Math.random()+70);t++;var a=this.rollN(100,this.min);this.european.forEach((function(o){o.prob=1})),a<=60?o=this.probAllocate(this.copper):a>60&&a<=90?o=this.probAllocate(this.silver):(s++,o=this.probAllocate(this.gold)),n>70&&n<=95?this.summon(o,3,3,3,3):this.summon(o,4,10,10,10)}return s},nextBox:function(){var o=this;if(this.cards=[],this.currentNum++,this.diamonds+=50,"Diamond"==this.currentMode)if(console.log("num,gold---",this.currentNum,this.luckGold),5==this.currentNum&&this.luckGold||5!=this.currentNum)this.luckGold+=this.draw5ByDiamond();else{for(var t=void 0,s=0,i=0;i<4;i++){var r=this.draw1ByDiamond();r[0]>70&&s++,r[1]>90&&this.luckGold++}if(s&&this.luckGold)this.draw1ByDiamond();else if(s&&!this.luckGold){var n=this.rollN(100,this.min),a=this.european.length;this.european.forEach((function(o){o.prob=1/a})),this.rareAllocate(this.european),this.luckGold++,t=this.probAllocate(this.gold),console.log(t),n<=70?this.summon(t,2,1,1,1):n>70&&n<=95?this.summon(t,3,3,3,3):this.summon(t,4,10,10,10)}else if(!s&&this.luckGold){var e=this.rollN(100,70);s++;var c=this.rollN(100,this.min);this.european.forEach((function(o){o.prob=1})),c<=60?t=this.probAllocate(this.copper):c>60&&c<=90?t=this.probAllocate(this.silver):(this.luckGold++,t=this.probAllocate(this.gold)),e>70&&e<=95?this.summon(t,3,3,3,3):this.summon(t,4,10,10,10)}else{var l=this.rollN(100,70),h=this.european.length;this.european.forEach((function(o){o.prob=1/h})),this.rareAllocate(this.european),this.luckGold++,t=this.probAllocate(this.gold),console.log(t),l>70&&l<=95?this.summon(t,3,3,3,3):this.summon(t,4,10,10,10)}}else if(5==this.currentNum&&this.luckGold||5!=this.currentNum)this.luckGold+=this.draw5ByUp(this.poolId);else{for(var u=void 0,d=0,m=0;m<4;m++){var p=this.draw1ByUp(this.poolId);p[0]>70&&d++,p[1]>90&&this.luckGold++}if(d&&this.luckGold)this.draw1ByUp(this.poolId);else if(d&&!this.luckGold){var f=this.rollN(100,this.min);d++,this.european.forEach((function(o){o.prob=1})),this.luckGold++,u=this.probAllocate(this.gold),f<=70?this.summon(u,2,1,1,1):f>70&&f<=95?this.summon(u,3,3,3,3):this.summon(u,4,10,10,10)}else if(!d&&this.luckGold){var v=this.rollN(100,70),b=this.rollN(100,this.min);this.cardPoolList.forEach((function(t){t.id==o.poolId&&(o.cardPool=t)}));var g=(100-this.cardPool.cards.length*this.cardPool.prob)/(this.european.length-this.cardPool.cards.length);console.log("cardRProb---",g),this.cardPool.cards.forEach((function(t){o.european.forEach((function(s){t==s.name&&(s.prob=o.cardPool.prob)}))})),b<=60?u=this.probAllocate(this.copper):b>60&&b<=90?u=this.probAllocate(this.silver):(this.luckGold++,u=this.probAllocate(this.gold)),v>70&&v<=95?this.summon(u,3,3,3,3):this.summon(u,4,10,10,10)}else{var N=this.rollN(100,70);this.cardPoolList.forEach((function(t){t.id==o.poolId&&(o.cardPool=t)}));var w=(100-this.cardPool.cards.length*this.cardPool.prob)/(this.european.length-this.cardPool.cards.length);console.log("cardRProb---",w),this.cardPool.cards.forEach((function(t){o.european.forEach((function(s){t==s.name&&(s.prob=o.cardPool.prob)}))})),this.luckGold++,u=this.probAllocate(this.gold),N>70&&N<=95?this.summon(u,3,3,3,3):this.summon(u,4,10,10,10)}}console.log("luckGold----",this.luckGold)},inin:function(t,s,i){o(".card .txt").css("opacity","0"),t.txt=i,t.class="",t.summonType=s,this.cards.push(t),this.$nextTick((function(){o(".card").height(1.5*o(".card").width()),o(".card .txt").css("margin-top",1.5*o(".card").width()+10+"px")}))},btnCamp1:function(){this.cards=[],this.currentNum=0,this.showNext=!1;var o=this;setTimeout((function(){o.draw1ByUp(o.poolId),o.diamonds+=0}),100)},btnCamp5:function(){this.cards=[],this.currentNum=0,this.showNext=!1;var o=this;setTimeout((function(){o.draw5ByUp(o.poolId),o.diamonds+=50}),100)},btnCamp25:function(){this.currentMode="Camp",this.cards=[],this.currentNum=0,this.currentNum++,this.showNext=!0,this.luckGold=0;var o=this;setTimeout((function(){o.luckGold+=o.draw5ByUp(o.poolId),o.diamonds+=50,console.log("luckGold----",o.luckGold)}),100)},btnDiamond1:function(){this.cards=[],this.currentNum=0,this.showNext=!1;var o=this;setTimeout((function(){o.draw1ByDiamond(),o.diamonds+=0}),100)},btnDiamond5:function(){this.cards=[],this.currentNum=0,this.showNext=!1;var o=this;setTimeout((function(){o.luckGold=o.draw5ByDiamond(),o.diamonds+=50}),100)},btnDiamond25:function(){this.currentMode="Diamond",this.cards=[],this.currentNum=0,this.currentNum++,this.showNext=!0,this.luckGold=0;var o=this;setTimeout((function(){o.luckGold+=o.draw5ByDiamond(),o.diamonds+=50,console.log("luckGold----",o.luckGold)}),100)},open:function(t){console.log(t),this.cards[t].class="open",console.log(this.cards);var s=this.cards;this.cards=[],this.cards=s;var i=this;setTimeout((function(){switch(o(".card .txt").eq(t).css("opacity","1"),i.cards[t].summonType){case 1:o(".card").eq(t).addClass("l1");break;case 2:o(".card").eq(t).addClass("l2");break;case 3:o(".card").eq(t).addClass("l3");break;case 4:o(".card").eq(t).addClass("l4");break}}),500),console.log(this.cards[t].class)},toggleCards:function(o){this.version=o,this.init()}}}}).call(this,s("1157"))},"61cf":function(o,t,s){"use strict";var i=s("b71d"),r=s.n(i);r.a},8473:function(o,t,s){},b71d:function(o,t,s){},e607:function(o,t,s){"use strict";var i=s("8473"),r=s.n(i);r.a}}]);
//# sourceMappingURL=chunk-0679815d.64dee175.js.map